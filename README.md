<h1 align="center">
	<img src="https://github.com/marko-londo/Code-Reference-Library/blob/main/Images/Header.png?raw=true" alt="Code-Reference-Library">
</h1>
<h1 align="center">
	<b>Code Reference Library</b>
<br>
</h1>
<h2 align="center">
    <em>Code snippets and descriptions with detailed commenting from some of my .ipynbs, serving as a reference for various coding topics.</em>
</h2>
<br>
<br>
<br>

### Table of Contents

- [Introduction](#introduction)
- [Imports](#imports)
  - [Pathlib](#pathlib)
    - [Path](#path)
  - [Pandas](#pandas)
  - [Matplotlib](#matplotlib)
    - [.pyplot](#pyplot)
    - [%matplotlib inline](#matplotlib-inline)
  - [Seaborn](#seaborn)
  - [Chardet](#chardet)
  - [Calendar](#calendar)
- [Function Documentation](#function-documentation)
  - [get_col_idx](#get_col_idx)
  - [shapes_by_month](#shapes_by_month)
  - [race_plot_prep](#race_plot_prep)
  - [race_plotter](#race_plotter)
  - [plot_bot](#plot_bot)




<br>
<hr>
<br>
<h1 align="center">
	<img src="https://github.com/marko-londo/Code-Reference-Library/blob/main/Images/introduction.png?raw=true" alt="Introduction">
</h1>


## Introduction 
<br>This repository serves as an information library for data plotting and
analysis in Python. It contains a collection of useful functions and serves as
a reference for different coding topics. Additionally, it showcases visually appealing
plots to inspire and guide data visualization projects. The idea behind it was
to create a repo that is easy to navigate, to find specific use cases or
methods of aquiring results in a simplified way based on my own trial and error. This
repository will be regularly updated with new functions, interesting plots,
verbosely commented code snippets, and helpful examples.<br><br>

[Return to Top](#table-of-contents)
<br>
<br>
<hr>
<br>
<h1 align="center">
	<img src="https://github.com/marko-londo/Code-Reference-Library/blob/main/Images/Imports.png?raw=true" alt="Imports">

## Imports
<br>This section offers a brief overview of common imports and their uses. This
will help to find the specific library or module needed for a given task with a
concise description of each.<br><br>

- ### Pathlib

  Pathlib is a module that offers a simpler way to work with file systems and
  paths by representing them as objects, allowing for easy manipulation and
  platform-independent operations.

  - #### Path
   
    Path refers to the main class provided by the pathlib module. It
    represents a file system path as an object, enabling straightforward
    manipulation and operations on paths in a cross-platform manner.

    ```python
    from pathlib import Path

    path = Path(r"C:\Users\(...)\data.csv")
    ```
  
- ### Pandas

  Pandas is a powerful open-source Python library widely used for data
  manipulation and analysis. It provides data structures and functions to
  efficiently work with structured data, such as tables and time series,
  making it an essential tool for data scientists and analysts. Pandas allows
  for easy data cleaning, transformation, aggregation, and exploration, and
  offers various methods for handling missing data and dealing with diverse
  data formats. It also integrates well with other libraries in the Python
  ecosystem, making it a popular choice for data analysis tasks. It is
  generally aliased and imported as "pd"
  
  ```python
  import pandas as pd
  ```


- ### Matplotlib

  Matplotlib is a popular Python library used for creating static, animated,
  and interactive visualizations. It provides a wide range of plotting
  functionalities, allowing users to generate various types of charts,
  graphs, and plots with customizable features. Matplotlib is highly
  flexible, enabling users to create publication-quality visualizations for
  data analysis, scientific research, and data exploration tasks.
  
  - #### .pyplot
  
    .pyplot is a function provided by the matplotlib module that offers
    easy access to various plot types, including line, bar, box, scatter,
    and more. It is generally aliased and imported as "plt"

    ```python
    import matplotlib.pyplot as plt
    ```

  - #### %matplotlib inline
    
    The %matplotlib inline command is a specific Jupyter Notebook magic
    command used to enable the inline display of matplotlib plots within the
    notebook itself. By using this command, any plots generated by matplotlib
    will be shown directly in the output cell of the notebook, allowing for a
    seamless integration of code and visualizations in the notebook
    environment.
    ```python
    %matplotlib inline
    ```
- ### Seaborn
  
  Seaborn is a Python library for creating visually attractive statistical
  visualizations. It simplifies the process of generating common plots and
  provides additional features like color control and categorical data
  visualization. It is generally aliased and imported as "sns"
  
  ```python
  import seaborn as sns
  ```
- ### Chardet
  
  Chardet is a Python library for automatic character encoding detection. It
  helps determine the encoding of text or files when not explicitly specified.
  
  ```python
  import chardet

  df = pd.read_csv(path, encoding="Windows-1252") 
  
  # Sets encoding paramater to Windows-1252
  ```

- ### Calendar
  
  The "calendar" module in Python provides various functionalities for working with dates, months, and years. It allows you to generate calendars, manipulate dates, and perform calculations related to dates and time.

  With the calendar module, you can:

  * Generate calendars for a specific month or an entire year.
  * Access information about weekdays, weekends, and leap years.
  * Determine the day of the week for a given date.
  * Perform calculations like adding or subtracting days, weeks, or months from a given date.
  * Format dates in different ways, such as displaying them as strings or extracting specific components like the day, month, or year.
   
   
  The calendar module is useful for tasks that involve date and time
  calculations, scheduling, or displaying dates in a structured manner.

  ```python
  import calendar
  ```


[Return to Top](#table-of-contents)
<br>
<br>
<hr>
<br>
<h1 align="center">
	<img src="https://github.com/marko-londo/Code-Reference-Library/blob/main/Images/Functions.png?raw=true" alt=" Functions">

## Function Documentation
<br>This section provides documentation of functions I've created for
referencing.<br><br>

- ### get_col_idx
  
  This is a helpful function for quickly determining the index of a column in a
  dataframe.
  
  ```python
  import pandas as pd

  def get_col_idx(df):
    """
    This function takes in a dataframe and returns the index of each column.

    Parameters:
        df (pandas.DataFrame): The input dataframe.

    Returns:
        None

    """

    # Iterate over the columns of the dataframe
    for i, column in enumerate(df.columns):
        # Print the index of each column
        print(f"Index of column '{column}': {i}")
    ```
    

[Return to Top](#table-of-contents)
<br>
<br>
- ### shapes_by_month
  
  This function was used in a previous project analyzing UFO sightings data to determine the number of
  sightings by shape, by month. I had a df with one column called "Date / Time" and
  another called  "Shape". The "Date / Time" column contained dates and times (YYYY-MM-DD HH:MM:SS). The "Shape" column contained different "Shape" values for
  each sighting (Cone, Round, Light, etc.). I wanted to create a new df with an
  Index of just the months in str date/time format, and a column for each individual shape with the number of
  times each shape was sighted as a value.

  ***TL;DR: this function was used/ serves as an example to:*** 
  * Get the month from a series of YYYY-MM-DD HH:MM:SS values and set it as an
    index in a new df.<br>
  ***AND***
  * Extract str type value counts and set them as columns in that df.
  
<br>

  ```python
  import pandas as pd
  import calendar

  def shapes_by_month(month_index):
      """
      Takes in month index and returns a df of shape counts by month.

      Parameters
      ----------
      month_index : int
          Month index of interest.

      Returns
      -------
      df : pd.DataFrame
          Dataframe of shape counts by month.

      Notes
      -----
      Month index starts at 1.
      """

      # Create a list of months from 1 to 12
      months = range(1, 13)

      # Create empty dictionaries to store dataframes
      data_by_month_df = {}
      shapes_by_month_df = {}

      # Iterate over each month
      for month in months:
          # Organize the data from the date/time column by month and add it to a 
          # series called  month_data
          month_data = ufo_filtered[ufo_filtered["Date / Time"].dt.month == month]

          # Create a dataframe for the filtered data and store it in the 
          # data_by_month_df dictionary
          data_by_month_df[month] = pd.DataFrame(month_data)

          # Create a dataframe of shape counts for the filtered data and store it 
          # in the shapes_by_month_df dictionary
          shapes_by_month_df[month] = pd.DataFrame(
              month_data["Shape"]
              .value_counts()
              .rename_axis("Shape")
              .reset_index(name="Count")
          )

      # Get the dataframe for the specified month index parameter and sort it by 
      # "Date / Time" column in ascending (chronological) order
      month = data_by_month_df[month_index].sort_values(by="Date / Time", ascending=True)

      # Count the number of occurrences of each shape in the specified month and create 
      # a dataframe
      month_shapes = (
          month["Shape"].value_counts().rename_axis("Shape").reset_index(name="Count")
      )

      # Add a "Month" column to the month_shapes dataframe with values ranging from 0 
      # to the number of unique shapes
      month_shapes["Month"] = list(range(len(month_shapes)))

      # Count the number of occurrences of each shape in the specified month and create 
      # a transposed dataframe
      shape_counts = (
          month["Shape"].value_counts().rename_axis("Shape").reset_index(name="Count")
      )
      month_df = pd.DataFrame(shape_counts).T

      # Set the column names of the `month_df` DataFrame to the values in the first row
      month_df.columns = month_df.iloc[0]

      # Drop the column named "Shape" from the `month_df` DataFrame
      month_df = month_df.drop("Shape")


      # Get the name of the specified month index, using the calendar module
      month_number = month_index
      month_name = calendar.month_name[month_number]

      # Set the index of month_df to be the month name
      month_df.index = pd.to_datetime([f"2000-{month_number:02d}-01"]).strftime("%B")

      # Return the final month_df dataframe
      return month_df
```
    

[Return to Top](#table-of-contents)
<br>
<br>

- ### race_plot_prep
  This function was used to prepare a df of US school data for plotting the
  total number of students by race, in a given school type and state. I wanted
  to create a chart that would take a user input of a school type and state,
  and produce a bar chart showing the specified state's and school type's
  total number of students by race. The df contained the following columns:
  "School Type", "State", "AM", "AS", "BL", "HI", "HP", "TR", and "WH". To
  analyze the data more efficiently, I first needed to create a new df that
  only included the specified school type and state. Then, I needed to include
  an additional column called "Race". By using the melt function, this new df
  would display each racial group and its corresponding value for each school
  in the dataset by expanding the rows to accomadate for each race. Finally, I
  needed to group the melted df by race and calculate the sum of values for
  each race, sorting the race totals in ascending order, and returning the
  series of race totals.

  ***TL;DR: this function was used/ serves as an example to:***
  * Prepare a dataset for plotting by transforming and consolidating multiple columns into a new DataFrame.
  ***AND***
  * Returning the newly created columns and their corresponding data as a series.
  
  <br>
  
  ```python
  def race_plot_prep(
      school_type, state, value_vars=["AM", "AS", "BL", "HI", "HP", "TR", "WH"]
      ):
      """
      Prepares the data for plotting the number of students by race in a given
      state.

      Parameters
      ----------
          school_type (str): The type of school (regular, special, etc.)
          state (str): The state of the school
          value_vars (list): The variables to be plotted.

      Returns
      -------
          df (pd.DataFrame): The prepared data.
      """

      # Filter the data to include only the specified school type
      school_type_filtered = all_schools.loc[
          all_schools["School Type"].isin([school_type])
      ]

      # Filter the data to include only the specified state
      state_filtered = school_type_filtered.loc[
          school_type_filtered["State"].isin([state])
      ]

      # Melt the filtered data to transform it from wide to long format
      race_melted = pd.melt(state_filtered, value_vars=value_vars)

      # Group the melted data by race variable and calculate the sum of values
      race_totals = race_melted.groupby("variable")["value"].sum()

      # Sort the race totals in ascending order
      race_totals_sorted = race_totals.sort_values(ascending=True)

      # Return the sorted race totals
      return race_totals_sorted
      ```
    

[Return to Top](#table-of-contents)
<br>
<br>
- ### race_plotter
  This function was used to take the returned series of race totals from the
  [race_plot_prep](#race_plot_prep) function and plot them as a bar chart.

  ***TL;DR: this function was used/ serves as an example to:***
  * Create a bar chart using data from another function

<br>

  ```python
  def race_plotter(race_totals, state):
      """
      Plots the number of students by race in a given state.

      Parameters
      ----------
      race_totals (series): The race totals
      state (str): The state of the school
      """

      # Set the size of the plot
      plt.figure(figsize=(17, 9))

      # Define the colors for the bar chart
      colors = [
          "#3C1853",
          "#3C1F67",
          "#37267B",
          "#2E308E",
          "#364EA1",
          "#4188A8",
          "#4DAFA0",
          "#58B67C",
          "#6CBD64",
      ]

      # Create the bar chart
      ax = sns.barplot(x=race_totals.index, y=race_totals.values, palette=colors)

      # Set the x-axis label
      plt.xlabel("\nRace", fontsize=14)

      # Set the y-axis label
      plt.ylabel("Number of Students\n", fontsize=14)

      # Set the title of the plot
      plt.title(f"Number of Students by Race [{state}]\n", fontsize=18)

      # Set the y-axis tick labels to be comma-separated integers
      y_labels = ax.get_yticks().tolist()
      ax.yaxis.set_major_formatter(ticker.FuncFormatter(lambda x, pos: f"{int(x):,}"))

      # Rotate the x-axis tick labels by 45 degrees
      ax.set_xticklabels(ax.get_xticklabels(), rotation=45)

      # Add labels to the bars with the values of each bar
      for i in ax.containers:
          ax.bar_label(i, fmt="%d")

      # Display the plot
      plt.show()
  ```
    

[Return to Top](#table-of-contents)
<br>
<br>

- ### plot_bot
  This function takes a user input of a school type and state, and plots the
  total number of students by race in that state, using the
  [race_plot_prep](#race_plot_prep) and [race_plotter](#race_plotter)
  functions. It first asks what school type and state the user would like to
  plot, and if those values are valid, it then calls the functions to plot the
  data in a bar chart.
  Else it displays a message that the values could not be found.

  ***TL;DR: this function was used/ serves as an example to:***
  * Ask for a user input
  ***AND***
  * Call another function based on the input, or display an error message (using an if statement).
  
  <br>

  ```python
  def race_plotter(race_totals, state):
    """
    Plots the number of students by race in a given state.

    Parameters
    ----------
    race_totals (series): The race totals
    state (str): The state of the school
    """

    # Set the size of the plot
    plt.figure(figsize=(17, 9))

    # Define the colors for the bar chart
    colors = [
        "#3C1853",
        "#3C1F67",
        "#37267B",
        "#2E308E",
        "#364EA1",
        "#4188A8",
        "#4DAFA0",
        "#58B67C",
        "#6CBD64",
    ]

    # Create the bar chart
    ax = sns.barplot(x=race_totals.index, y=race_totals.values, palette=colors)

    # Set the x-axis label
    plt.xlabel("\nRace", fontsize=14)

    # Set the y-axis label
    plt.ylabel("Number of Students\n", fontsize=14)

    # Set the title of the plot
    plt.title(f"Number of Students by Race [{state}]\n", fontsize=18)

    # Set the y-axis tick labels to be comma-separated integers
    y_labels = ax.get_yticks().tolist()
    ax.yaxis.set_major_formatter(ticker.FuncFormatter(lambda x, pos: f"{int(x):,}"))

    # Rotate the x-axis tick labels by 45 degrees
    ax.set_xticklabels(ax.get_xticklabels(), rotation=45)

    # Add labels to the bars with the values of each bar
    for i in ax.containers:
        ax.bar_label(i, fmt="%d")

    # Display the plot
    plt.show()
    ```
    

[Return to Top](#table-of-contents)
<br>
<br>



  
  
    